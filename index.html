<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ƒêƒÉng k√Ω ca l√†m</title>

<style>
:root {
  --bg: linear-gradient(135deg, #dff6f3, #f7fbff);
  --card: #ffffff;
  --text: #222;
  --accent: #00a8a8;
}

body.dark {
  --bg: linear-gradient(135deg, #0f2027, #203a43);
  --card: #1f2933;
  --text: #f1f5f9;
  --accent: #38f2e0;
}

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

.container {
  width: 100%;
  max-width: 420px;
  padding: 20px;
}

.card {
  background: var(--card);
  border-radius: 20px;
  box-shadow: 0 20px 40px rgba(0,0,0,.1);
  padding: 20px;
  animation: fadeIn .6s ease;
}

@keyframes fadeIn {
  from {opacity:0; transform: translateY(20px);}
  to {opacity:1; transform:none;}
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

h2 {
  margin: 0;
  font-size: 20px;
}

.toggle {
  cursor: pointer;
  font-size: 20px;
}

input {
  width: 100%;
  padding: 12px;
  margin: 15px 0;
  border-radius: 12px;
  border: 1px solid #ccc;
  font-size: 15px;
}

table {
  width: 100%;
  border-collapse: collapse;
}

td {
  padding: 10px 0;
}

.day {
  font-weight: 600;
}

select {
  width: 100%;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid #ccc;
  transition: .2s;
}

select:not([value=""]) {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(0,168,168,.15);
}

button {
  margin-top: 18px;
  width: 100%;
  padding: 14px;
  border: none;
  border-radius: 14px;
  font-size: 16px;
  background: linear-gradient(135deg, var(--accent), #00d4c4);
  color: white;
  cursor: pointer;
  transition: .2s;
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(0,0,0,.15);
}

.note {
  margin-top: 10px;
  font-size: 13px;
  opacity: .7;
}
</style>
</head>

<body>
<div class="container">
  <div class="card">
    <div class="header">
      <h2>üìÖ ƒêƒÉng k√Ω ca l√†m</h2>
      <div class="toggle" onclick="toggleTheme()">üåô</div>
    </div>

    <input id="name" placeholder="üë§ Nh·∫≠p t√™n c·ªßa b·∫°n">

    <table id="schedule"></table>

    <button onclick="submitSchedule()">‚úÖ X√°c nh·∫≠n ƒëƒÉng k√Ω</button>
    <div class="note">Ng√†y kh√¥ng l√†m c√≥ th·ªÉ ƒë·ªÉ tr·ªëng.</div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyCK6yfVr9VBMGwhbvYMXkJqMoRjo4Om2LM",
  authDomain: "an-quy.firebaseapp.com",
  databaseURL: "https://an-quy-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "an-quy",
  storageBucket: "an-quy.firebasestorage.app",
  messagingSenderId: "672469940026",
  appId: "1:672469940026:web:a38e5b15bbeb2361b84203"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const days = ["T2","T3","T4","T5","T6","T7","CN"];
const table = document.getElementById("schedule");

days.forEach(d => {
  table.innerHTML += `
    <tr>
      <td class="day">${d}</td>
      <td>
        <select id="${d}">
          <option value="">‚Äî Kh√¥ng l√†m ‚Äî</option>
          <option value="C1">C1</option>
          <option value="C2">C2</option>
          <option value="C3">C3</option>
          <option value="2C_C1_C2">2C (C1 + C2)</option>
          <option value="2C_C2_C3">2C (C2 + C3)</option>
        </select>
      </td>
    </tr>
  `;
});

window.submitSchedule = () => {
  const name = document.getElementById("name").value.trim();
  if (!name) return alert("Ch∆∞a nh·∫≠p t√™n");

  const lich = {};
  days.forEach(d => {
    const v = document.getElementById(d).value;
    if (v) lich[d] = v;
  });

  set(ref(db, "dangKy/" + name), {
    ten: name,
    lich,
    time: Date.now()
  }).then(() => alert("üéâ G·ª≠i l·ªãch th√†nh c√¥ng"));
};

window.toggleTheme = () => {
  document.body.classList.toggle("dark");
};
</script>
</body>
</html>

